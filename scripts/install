#!/usr/bin/env ruby

require File.join(File.expand_path(File.dirname(__FILE__)), "common")

with_stow do |package|
  _say "Installing #{package}"
  `stow -t ~ #{package}`
end

with "curl" do
  _say "Installing vim dependencies"
  `mkdir -p vim/.vim/autoload`
  `curl -fLo vim/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim`
end

with "vim" do
  _say "Launching Vim to install plugins (this may take a while)"
  pid = fork { exec "vim +PlugInstall +qall" }
  Process.wait pid
end

_say "All done!"

exit

# vim:set ft=ruby:
